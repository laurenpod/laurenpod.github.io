<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TIme Piece</title>

  <style>
    /* Flip Clock CSS */

    .period {
  font-size: 28px;
  margin-left: 10px; /* Space after the clock */
  color: #ffffff00;
}
    .flip-clock-wrapper {
      position: absolute;
      top: 450px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 999; /* Ensure it's on top */
    }

    .flip-clock {
      font-family: 'georgia', sans-serif;
      font-size: 40px;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }

.flip-clock .clock {
  display: flex;
  justify-content: space-between;
  gap: 37px; /* Adjust the value to control spacing */
}

    .flip-clock .clock .flip {
      background-color: #333;
      border: 1px solid #222;
      margin: 0 2px;
      width: 90px;
      height: 90px;
      display: inline-block;
      position: relative;
    }

    .flip-clock .clock .flip .top,
    .flip-clock .clock .flip .bottom {
      position: absolute;
      width: 100%;
      height: 50%;
      background-color: #222;
      color: #ffffff;
      text-align: center;
      line-height: 35px;
      font-size: 35px;
      font-weight: bold;
    }

    .flip-clock .clock .flip .top {
      top: 0;
    }

    .flip-clock .clock .flip .bottom {
      bottom: 0;
    }

    .flip-clock .clock .flip .flip-inner {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      transform-style: preserve-3d;
      transition: transform 0.6s ease-in-out;
    }

    .flip-clock .clock .flip.flip-inner.flip-animation {
      transform: rotateX(180deg);
    }

    .flip-clock .clock .flip .top,
    .flip-clock .clock .flip .bottom {
      position: absolute;
      width: 100%;
      height: 50%;
      background-color: #222;
      color: #ffffff;
      text-align: center;
      line-height: 35px;
      font-size: 35px;
      font-weight: bold;
      backface-visibility: hidden;
    }

    .flip-clock .clock .flip .bottom {
      transform: rotateX(180deg);
    }

    /* Additional styles for the page */
    body {
  background-image: url('afternoon.png'); /* Replace with the path to your image */
  background-size: cover; /* Ensures the image covers the whole screen */
  background-position: center; /* Centers the image */
  background-repeat: no-repeat; /* Prevents tiling */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background-color: rgb(186, 168, 145);
      font-family: 'Cochin', serif;
      position: relative;
    }
    .radio-wrapper {
  width: 80px; /* Set the dial's width */
  height: 80px; /* Set the dial's height */
  background-image: url('dial.jpg'); /* Ensure the image path is correct */
  background-size: cover;
  background-position: center;
  border-radius: 50%;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  cursor: grab;
  position: absolute; /* Allow precise positioning */
  right: 246px; /* Move the dial to the right of the screen */
  top: 546px; /* Adjust the vertical position */
  transform-origin: center;
  z-index: 1; /* Keep it above other elements */
}


    .radio-player {
      width: 20%;
      max-width: 5px;
      margin-top: 290px;
      margin-right: 96px;
    }
  </style>
</head>
<body>

  <!-- Flip Clock -->
  <div class="flip-clock-wrapper">
    <div class="flip-clock">
      <div class="clock">
        <div class="flip">
          <div class="flip-inner">
            <div class="top">0</div>
            <div class="bottom">0</div>
          </div>
        </div>
        <div class="flip">
          <div class="flip-inner">
            <div class="top">0</div>
            <div class="bottom">0</div>
          </div>
        </div>
        <div class="flip">
          <div class="flip-inner">
            <div class="top">0</div>
            <div class="bottom">0</div>
          </div>
        </div>
        <div class="flip">
          <div class="flip-inner">
            <div class="top">0</div>
            <div class="bottom">0</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Vintage Radio Dial -->
  <div class="radio-wrapper" id="dial"></div>

  <!-- Radio Player -->
  <div class="ng-app-embedded radio-player">
    <div ui-view 
         class="microsite embedded-radio-player" 
         data-playerwidth="340px" 
         data-playertype="web_embedded" 
         data-playstation="cladrite" 
         data-autoplay="true" 
         data-apikey="df04ff67dd3339a6fc19c9b8be164d5b5245ae93">
    </div>
  </div>

  <!-- Embed Script -->
  <script>
    (function(d, s) {
      if (!window.rel) {
        s = d.createElement("script");
        s.type = "text/javascript";
        s.async = true;
        s.id = "radio-de-embedded";
        s.src = "https://www.radio.net/inc/microsite/js/full.js";
        d.getElementsByTagName("head")[0].appendChild(s);
        window.rel = true;
      }
    }(document));

    // Drag and Rotate Dial
    const dial = document.getElementById('dial');
    let isDragging = false;
    let initialAngle = 0;

    dial.addEventListener('mousedown', (event) => {
      isDragging = true;
      dial.style.cursor = 'grabbing';

      const rect = dial.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;

      const dx = event.clientX - centerX;
      const dy = event.clientY - centerY;
      initialAngle = Math.atan2(dy, dx) * (180 / Math.PI) - (dial.rotation || 0);
    });

    document.addEventListener('mousemove', (event) => {
      if (!isDragging) return;

      const rect = dial.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;

      const dx = event.clientX - centerX;
      const dy = event.clientY - centerY;
      const angle = Math.atan2(dy, dx) * (180 / Math.PI) - initialAngle;

      dial.style.transform = `rotate(${angle}deg)`;
      dial.rotation = angle;
    });

    document.addEventListener('mouseup', () => {
      isDragging = false;
      dial.style.cursor = 'grab';
    });

    // Initialize the Flip Clock
    var clock = {
      clock: document.querySelector('.clock'),
      time: [0, 0, 0, 0, 0, 0],

      start: function() {
        this.setCurrentTime();
        setInterval(this.update.bind(this), 1000);
      },

      setCurrentTime: function() {
        const now = new Date();
        const newYorkTime = new Date(now.toLocaleString("en-US", { timeZone: "America/New_York" }));
        
        let hours = newYorkTime.getHours();
        const minutes = newYorkTime.getMinutes();
        const seconds = newYorkTime.getSeconds();

        const period = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12;

        this.time = [
          Math.floor(hours / 10), hours % 10,
          Math.floor(minutes / 10), minutes % 10,
          Math.floor(seconds / 10), seconds % 10
        ];

        this.render(period);
      },

      update: function() {
        const now = new Date();
        const newYorkTime = new Date(now.toLocaleString("en-US", { timeZone: "America/New_York" }));

        this.time[5] += 1;
        if (this.time[5] >= 10) {
          this.time[5] = 0;
          this.time[4] += 1;
        }

        if (this.time[4] >= 6) {
          this.time[4] = 0;
          this.time[3] += 1;
        }

        if (this.time[3] >= 10) {
          this.time[3] = 0;
          this.time[2] += 1;
        }

        if (this.time[2] >= 6) {
          this.time[2] = 0;
          this.time[1] += 1;
        }

        if (this.time[1] >= 10) {
          this.time[1] = 0;
          this.time[0] += 1;
        }

        this.render(newYorkTime.getHours() >= 12 ? 'PM' : 'AM');
      },

      render: function(period) {
        let i = 0;
        const digits = this.clock.querySelectorAll('.flip');

        digits.forEach((digit) => {
          const inner = digit.querySelector('.flip-inner');
          const top = inner.querySelector('.top');
          const bottom = inner.querySelector('.bottom');

          // Add the flip animation class
          inner.classList.add('flip-animation');
          
          // After the animation ends, remove the animation class for the next time
          inner.addEventListener('transitionend', () => {
            inner.classList.remove('flip-animation');
          });

          // Update the top and bottom text content
          const newTop = this.time[i];
          const newBottom = this.time[i];
          
          if (top.textContent !== newTop) {
            top.textContent = newTop;
          }
          if (bottom.textContent !== newBottom) {
            bottom.textContent = newBottom;
          }

          i++;
        });

        // Update the AM/PM period
        let periodEl = document.querySelector('.period');
        if (!periodEl) {
          periodEl = document.createElement('div');
          periodEl.classList.add('period');
          this.clock.appendChild(periodEl);
        }
        periodEl.textContent = period;
      }
    };

    clock.start(); // Start the clock
  </script>

</body>
</html>
